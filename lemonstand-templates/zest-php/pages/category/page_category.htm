<div class="row">
  <div class="content twelve columns">
    <div class="row">
    
      <div class="three columns categories">
        <h3>Categories</h3>
        <? $this->render_partial('shop:categories') ?>
      </div>
      <div class="product-list nine columns">
        <? if (!$category): ?>
          <h2>Category not found</h2>
          <p>We are sorry, the requested category was not found.</p>
        <? else: ?>
          <div class="row">
          <? 
            $this->render_partial('shop:product_list', array(
              'products'=>$category->list_products(array('sorting'=>array('name'))),
              'records_per_page'=>12,
              'paginate'=>true, 
              'pagination_base_url'=>$category->page_url('category'),
              'page_index'=>$this->request_param(-1),
              'empty_text'=>'There are no products in this category.'
            )) 
          ?> 
          </div>
        <? endif ?>
      </div>
    </div>
  </div>
</div>