<div class="row">
  <div class="content twelve columns">
    <div class="row blog">
      <? if (isset($post)): ?>
        <div class="eight columns">
          <?= $post->content ?>
          
          <p class="post-details">
            Published by <?= h($post->author_first_name).' '.h($post->author_last_name) ?>
            on <?= $post->published_date->format('%F') ?> in
            
            <?
              $last_index = $post->categories->count-1;
              foreach ($post->categories as $index=>$cur_category): ?>
              <a href="<?= root_url('blog/category/'.$cur_category->url_name) ?>"><?= h($cur_category->name) ?></a><? if ($index < $last_index): ?>, <? endif ?>
            <? endforeach ?>
          </p>
        </div>
      
        <div class="three columns offset-by-one categories">
          <h3>Categories</h3>
          <? $this->render_partial('blog:categories') ?>
        </div>
      <? else: ?>
        <p class="flash error">The requested post is not found</p>
        <a class="button" href="<?= root_url('blog') ?>">Return to the Blog</a>
      <? endif ?>
    </div>
  </div>
</div>